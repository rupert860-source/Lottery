<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å©šç¦® 5 äººæ°£çƒæ¶ç ´éŠæˆ²</title>
<style>
  body { font-family: Arial,sans-serif; text-align:center; background:#fff0f5; padding:20px; }
  h1 { color:#d147a3; font-size:32px; margin-bottom:10px; }
  .balloon { width:120px; height:160px; border-radius:60%; margin:15px; display:flex; align-items:center; justify-content:center; font-size:22px; font-weight:bold; color:white; position:relative; cursor:pointer; box-shadow: inset -5px -10px rgba(0,0,0,0.2); transition: transform 0.1s ease; }
  .balloon:after { content:''; position:absolute; bottom:-20px; left:50%; transform:translateX(-50%); width:20px; height:30px; background:inherit; clip-path: polygon(50% 0%,0% 100%,100% 100%); }
  .balloon-container { display:inline-block; text-align:center; }
  .progress-bar { width:120px; height:10px; background:#eee; border-radius:5px; margin:5px auto 15px auto; overflow:hidden; }
  .progress-fill { height:100%; width:0%; background:#d147a3; transition:width 0.1s; }
  #winner { margin-top:30px; font-size:28px; font-weight:bold; color:#d147a3; }
  #scoreboard { margin-top:40px; font-size:20px; font-weight:bold; }
  #scoreboard table { margin:0 auto; border-collapse:collapse; }
  #scoreboard th, #scoreboard td { border:2px solid #d147a3; padding:8px 15px; border-radius:8px; }
  #confetti-canvas { position: fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:9999; }
</style>
</head>
<body>

<h1>å©šç¦® 5 äººæ°£çƒæ¶ç ´éŠæˆ²</h1>

<div id="game-area">
  <div class="balloon-container" id="balloon1"></div>
  <div class="balloon-container" id="balloon2"></div>
  <div class="balloon-container" id="balloon3"></div>
  <div class="balloon-container" id="balloon4"></div>
  <div class="balloon-container" id="balloon5"></div>
</div>

<div id="winner"></div>
<div id="scoreboard"></div>

<canvas id="confetti-canvas"></canvas>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
<script>
const balloonColors = ['#FF6B6B','#FF9F1C','#FFD93D','#6BCB77','#4D96FF'];
const players = ['ç©å®¶1','ç©å®¶2','ç©å®¶3','ç©å®¶4','ç©å®¶5'];
let scores = [0,0,0,0,0];
let winnerDeclared = false;

for(let i=0;i<5;i++){
  const container = document.getElementById('balloon'+(i+1));
  const balloon = document.createElement('div');
  balloon.className = 'balloon';
  balloon.style.background = balloonColors[i];
  balloon.innerText = players[i];
  container.appendChild(balloon);

  const progressBar = document.createElement('div');
  progressBar.className = 'progress-bar';
  const progressFill = document.createElement('div');
  progressFill.className = 'progress-fill';
  progressBar.appendChild(progressFill);
  container.appendChild(progressBar);

  balloon.addEventListener('click', ()=>{
    if(winnerDeclared) return;
    scores[i]++;
    progressFill.style.width = Math.min(scores[i]*10,100)+'%';
    balloon.style.transform = 'scale(1.1)';
    setTimeout(()=>{ balloon.style.transform='scale(1)'; },100);

    if(scores[i]>=10){
      winnerDeclared = true;
      document.getElementById('winner').innerText = 'ğŸ† å‹åˆ©è€…ï¼š'+players[i]+'!';
      showConfetti();
      updateScoreboard();
    }
  });
}

function updateScoreboard(){
  let html = '<table><tr><th>ç©å®¶</th><th>åˆ†æ•¸</th></tr>';
  for(let i=0;i<5;i++){
    html += '<tr><td>'+players[i]+'</td><td>'+scores[i]+'</td></tr>';
  }
  html += '</table>';
  document.getElementById('scoreboard').innerHTML = html;
}

function showConfetti(){
  const duration = 3000;
  const animationEnd = Date.now() + duration;
  const canvas = document.getElementById('confetti-canvas');
  const myConfetti = confetti.create(canvas, { resize: true, useWorker: true });

  (function frame(){
    myConfetti({
      particleCount: 3,
      angle: 60,
      spread: 55,
      origin: { x: 0 }
    });
    myConfetti({
      particleCount: 3,
      angle: 120,
      spread: 55,
      origin: { x: 1 }
    });
    if(Date.now() < animationEnd){ requestAnimationFrame(frame); }
  })();
}
</script>

</body>
</html>
